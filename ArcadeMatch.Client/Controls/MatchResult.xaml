<UserControl
    d:DesignHeight="500"
    d:DesignWidth="700"
    mc:Ignorable="d"
    x:Class="GameFinder.Controls.MatchResult"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:objects="clr-namespace:GameFinder.Objects"
    xmlns:wpfui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <Grid.Background>
            <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                <GradientStop Color="#10121A" Offset="0" />
                <GradientStop Color="#05060A" Offset="1" />
            </LinearGradientBrush>
        </Grid.Background>

        <Grid Margin="20" RowDefinitions="Auto,*">
            <StackPanel Grid.Row="0" HorizontalAlignment="Center">
                <TextBlock
                    FontSize="32"
                    FontWeight="Bold"
                    Foreground="{DynamicResource AccentBrush}"
                    Text="Match results"
                    TextAlignment="Center"
                    x:Name="ResultText" />
                <TextBlock
                    Style="{DynamicResource BodyTextStyle}"
                    Text="Here are the games everyone loved."
                    TextAlignment="Center"
                    x:Name="SubtitleText" />
                <StackPanel
                    HorizontalAlignment="Center"
                    Margin="0,12,0,0"
                    Orientation="Horizontal">
                    <wpfui:Button
                        Appearance="Secondary"
                        Click="CopyMatches_Click"
                        Content="ðŸ“‹ Copy match list"
                        x:Name="ShareButton" />
                    <wpfui:Button
                        Appearance="Primary"
                        Click="Back_Click"
                        Content="ðŸ  Back to Home" />
                </StackPanel>
            </StackPanel>

            <Border
                Background="#1A1D2C"
                CornerRadius="14"
                Grid.Row="1"
                Margin="0,20,0,0"
                Padding="12">
                <ScrollViewer VerticalScrollBarVisibility="Auto" x:Name="MatchesScrollViewer">
                    <ItemsControl x:Name="MatchesList">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel
                                    HorizontalAlignment="Center"
                                    ItemHeight="Auto"
                                    ItemWidth="220" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate DataType="{x:Type objects:MatchedGame}">
                                <wpfui:Card
                                    Margin="8"
                                    Padding="0"
                                    Width="220">
                                    <Grid RowDefinitions="140,Auto,Auto">
                                        <Border ClipToBounds="True" Grid.Row="0">
                                            <Image Source="{Binding Data.HeaderImage}" Stretch="UniformToFill" />
                                        </Border>
                                        <StackPanel Grid.Row="1" Margin="12">
                                            <TextBlock
                                                FontWeight="SemiBold"
                                                Foreground="White"
                                                Text="{Binding Data.Name}"
                                                TextWrapping="Wrap" />
                                            <TextBlock
                                                FontSize="12"
                                                Foreground="#B0B7C3"
                                                Text="{Binding Data.ShortDescription}"
                                                TextTrimming="CharacterEllipsis"
                                                TextWrapping="Wrap" />
                                            <TextBlock
                                                FontSize="12"
                                                FontWeight="SemiBold"
                                                Foreground="#FFD166"
                                                Text="{Binding LikesDisplay}"
                                                TextWrapping="Wrap" />
                                        </StackPanel>
                                        <Grid
                                            ColumnDefinitions="*,Auto"
                                            Grid.Row="2"
                                            Margin="12"
                                            VerticalAlignment="Center">
                                            <TextBlock
                                                FontSize="11"
                                                Foreground="#B0B7C3"
                                                Text="{Binding ParticipantsDisplay}"
                                                VerticalAlignment="Center" />
                                            <wpfui:Button
                                                Appearance="Transparent"
                                                Click="OpenSteam_Click"
                                                Content="ðŸ”—"
                                                Grid.Column="1"
                                                Tag="{Binding}"
                                                ToolTip="Open on Steam" />
                                        </Grid>
                                    </Grid>
                                </wpfui:Card>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </Border>

            <StackPanel
                Grid.Row="1"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                x:Name="NoMatchesPanel">
                <TextBlock
                    FontSize="48"
                    HorizontalAlignment="Center"
                    Text="ðŸ˜•" />
                <TextBlock
                    FontSize="20"
                    FontWeight="SemiBold"
                    Foreground="White"
                    Text="No liked games yet."
                    TextAlignment="Center" />
                <TextBlock
                    Foreground="#B0B7C3"
                    Text="Try inviting more friends or broadening your libraries to keep swiping!"
                    TextAlignment="Center"
                    TextWrapping="Wrap"
                    Width="320" />
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>
