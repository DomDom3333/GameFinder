<UserControl
    x:Class="GameFinder.Controls.MatchResult"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:wpfui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:objects="clr-namespace:GameFinder.Objects"
    mc:Ignorable="d"
    d:DesignHeight="500"
    d:DesignWidth="700">
    <Grid>
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                <GradientStop Color="#10121A" Offset="0" />
                <GradientStop Color="#05060A" Offset="1" />
            </LinearGradientBrush>
        </Grid.Background>

        <Grid Margin="20" RowDefinitions="Auto,*">
            <StackPanel Grid.Row="0" Spacing="8" HorizontalAlignment="Center">
                <TextBlock
                    x:Name="ResultText"
                    Foreground="{DynamicResource AccentBrush}"
                    FontSize="32"
                    FontWeight="Bold"
                    TextAlignment="Center"
                    Text="Match results" />
                <TextBlock
                    x:Name="SubtitleText"
                    Style="{DynamicResource BodyTextStyle}"
                    Text="Here are the games everyone loved."
                    TextAlignment="Center" />
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="12" Margin="0,12,0,0">
                    <wpfui:Button
                        x:Name="ShareButton"
                        Appearance="Secondary"
                        Click="CopyMatches_Click"
                        Content="ðŸ“‹ Copy match list" />
                    <wpfui:Button
                        Appearance="Primary"
                        Click="Back_Click"
                        Content="ðŸ  Back to Home" />
                </StackPanel>
            </StackPanel>

            <Border
                Grid.Row="1"
                Margin="0,20,0,0"
                Background="#1A1D2C"
                CornerRadius="14"
                Padding="12">
                <ScrollViewer x:Name="MatchesScrollViewer" VerticalScrollBarVisibility="Auto">
                    <ItemsControl x:Name="MatchesList">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel HorizontalAlignment="Center" ItemWidth="220" ItemHeight="Auto" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate DataType="{x:Type objects:MatchedGame}">
                                <wpfui:Card Margin="8" Width="220" Padding="0">
                                    <Grid RowDefinitions="140,Auto,Auto">
                                        <Border Grid.Row="0" ClipToBounds="True">
                                            <Image Source="{Binding Data.HeaderImage}" Stretch="UniformToFill" />
                                        </Border>
                                        <StackPanel Grid.Row="1" Margin="12" Spacing="4">
                                            <TextBlock
                                                Text="{Binding Data.Name}"
                                                FontWeight="SemiBold"
                                                Foreground="White"
                                                TextWrapping="Wrap" />
                                            <TextBlock
                                                Text="{Binding Data.ShortDescription}"
                                                Foreground="#B0B7C3"
                                                FontSize="12"
                                                TextWrapping="Wrap"
                                                TextTrimming="CharacterEllipsis" />
                                            <TextBlock
                                                Text="{Binding LikesDisplay}"
                                                Foreground="#FFD166"
                                                FontSize="12"
                                                FontWeight="SemiBold"
                                                TextWrapping="Wrap" />
                                        </StackPanel>
                                        <Grid Grid.Row="2" Margin="12" ColumnDefinitions="*,Auto" VerticalAlignment="Center">
                                            <TextBlock
                                                Text="{Binding ParticipantsDisplay}"
                                                Foreground="#B0B7C3"
                                                FontSize="11"
                                                VerticalAlignment="Center" />
                                            <wpfui:Button
                                                Grid.Column="1"
                                                Appearance="Transparent"
                                                Content="ðŸ”—"
                                                ToolTip="Open on Steam"
                                                Tag="{Binding}"
                                                Click="OpenSteam_Click" />
                                        </Grid>
                                    </Grid>
                                </wpfui:Card>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </Border>

            <StackPanel x:Name="NoMatchesPanel" Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Center" Spacing="12">
                <TextBlock FontSize="48" Text="ðŸ˜•" HorizontalAlignment="Center" />
                <TextBlock FontSize="20" FontWeight="SemiBold" Foreground="White" Text="No liked games yet." TextAlignment="Center" />
                <TextBlock Foreground="#B0B7C3" Text="Try inviting more friends or broadening your libraries to keep swiping!" TextAlignment="Center" Width="320" TextWrapping="Wrap" />
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>
