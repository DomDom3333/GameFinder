<UserControl
    x:Class="ArcadeMatch.Avalonia.Controls.MatchResult"
    x:DataType="sessionVm:MatchResultViewModel"
    x:Name="Root"
    xmlns="https://github.com/avaloniaui"
    xmlns:sessionVm="clr-namespace:ArcadeMatch.Avalonia.ViewModels.Sessions"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Border Background="#141822">
            <StackPanel
                HorizontalAlignment="Center"
                Margin="24"
                Spacing="12">
                <TextBlock
                    FontSize="32"
                    FontWeight="Bold"
                    HorizontalAlignment="Center"
                    Text="{Binding ResultTitle}" />
                <TextBlock
                    HorizontalAlignment="Center"
                    MaxWidth="420"
                    Text="{Binding Subtitle}"
                    TextWrapping="Wrap" />
                <StackPanel
                    HorizontalAlignment="Center"
                    Orientation="Horizontal"
                    Spacing="12">
                    <Button
                        Command="{Binding CopyMatchesCommand}"
                        Content="ðŸ“‹ Copy match list"
                        IsVisible="{Binding HasMatches}" />
                    <Button Command="{Binding BackCommand}" Content="ðŸ  Back to Home" />
                </StackPanel>
            </StackPanel>
        </Border>

        <Border
            Background="#1F2433"
            CornerRadius="12"
            Grid.Row="1"
            Margin="24"
            Padding="12">
            <ScrollViewer IsVisible="{Binding HasMatches}" VerticalScrollBarVisibility="Auto">
                <ItemsControl ItemsSource="{Binding Matches}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel HorizontalAlignment="Center" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate x:DataType="sessionVm:MatchResultItemViewModel">
                            <Border
                                Background="#262C3E"
                                CornerRadius="10"
                                Margin="8"
                                Width="220">
                                <StackPanel>
                                    <Border ClipToBounds="True" Height="140">
                                        <Image Source="{Binding Cover}" Stretch="UniformToFill" />
                                    </Border>
                                    <StackPanel Margin="12" Spacing="6">
                                        <TextBlock
                                            FontWeight="SemiBold"
                                            Text="{Binding Game.Data.Name}"
                                            TextWrapping="Wrap" />
                                        <TextBlock
                                            FontSize="12"
                                            Foreground="#ADB4C5"
                                            Text="{Binding Game.Data.ShortDescription}"
                                            TextTrimming="CharacterEllipsis"
                                            TextWrapping="Wrap" />
                                        <TextBlock
                                            FontSize="12"
                                            FontWeight="SemiBold"
                                            Foreground="#FFD166"
                                            Text="{Binding Game.LikesDisplay}"
                                            TextWrapping="Wrap" />
                                        <Grid ColumnDefinitions="*,Auto" VerticalAlignment="Center">
                                            <TextBlock
                                                FontSize="11"
                                                Foreground="#ADB4C5"
                                                Text="{Binding Game.ParticipantsDisplay}"
                                                VerticalAlignment="Center" />
                                            <Button
                                                Command="{Binding OpenSteamCommand}"
                                                Content="ðŸ”—"
                                                Grid.Column="1"
                                                ToolTip.Tip="Open on Steam" />
                                        </Grid>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Border>

        <StackPanel
            Grid.Row="1"
            HorizontalAlignment="Center"
            IsVisible="{Binding IsEmpty}"
            Spacing="12"
            VerticalAlignment="Center">
            <TextBlock
                FontSize="48"
                HorizontalAlignment="Center"
                Text="ðŸ˜•" />
            <TextBlock
                FontSize="20"
                FontWeight="SemiBold"
                HorizontalAlignment="Center"
                Text="No liked games yet." />
            <TextBlock
                Foreground="#ADB4C5"
                MaxWidth="320"
                Text="Try inviting more friends or broadening your libraries to keep swiping!"
                TextAlignment="Center"
                TextWrapping="Wrap" />
        </StackPanel>
    </Grid>
</UserControl>
